(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{471:function(e,t,a){},472:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(0),s=a.n(n),c=a(17),i=a.n(c),o=a(7),l=a(10),j=a(99),d=a(28),u=a(114),b=a(502),p=a(509),O=a(512),h=a(317),m=a(496),g=a(318),x=a(74),f=a(243),v=a(497),w=a(498),y=a(499),S=a(319),N=a(64),k=a.n(N),A=a(63),P=a.n(A),_=Object(h.a)((function(e){return{toolbar:e.mixins.toolbar,updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},logoImg:{height:"60px"},toolbarButtons:{marginLeft:"auto"}}}));var C=function(e){var t=Object(d.f)(),a=_();return Object(n.useEffect)((function(){localStorage.getItem("user-token")&&t.push("/user")}),[t]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Spiroshield"}),Object(r.jsx)("div",{className:a.toolbarButtons,children:Object(r.jsx)(f.a,{edge:"end",onClick:function(){return e.setType("light"===e.type?"dark":"light")},color:"inherit",children:"light"===e.type?Object(r.jsx)(P.a,{}):Object(r.jsx)(k.a,{})})})]})}),Object(r.jsx)("div",{className:a.toolbar}),Object(r.jsx)(v.a,{style:{marginTop:"20px"},maxWidth:"md",children:Object(r.jsx)(w.a,{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)("img",{className:a.logoImg,src:"/logo.png",alt:"Logo"}),Object(r.jsx)(x.a,{className:a.updownspace,children:"Hello, welcome to Spiroshield! This is a location where you can get PDFs shared by an administrator. Please Login/Signup to continue."}),Object(r.jsx)("div",{children:Object(r.jsx)(S.a,{className:a.updownspace,color:"primary",variant:"contained",size:"medium",onClick:function(){t.push("/login")},children:"Login"})}),Object(r.jsx)("div",{children:Object(r.jsx)(S.a,{className:a.updownspace,color:"primary",variant:"outlined",size:"medium",onClick:function(){t.push("/signup")},children:"Sign Up"})})]})})})]})},T=a(328),M=a(329),F=a(42),z=a.n(F),B=Object(h.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:e.spacing(2)}},ctabtn:{marginTop:e.spacing(3)},toolbar:e.mixins.toolbar,paperMain:{marginTop:e.spacing(3)},toolbarButtons:{marginLeft:"auto"}}}));var D=function(e){var t=B(),a=Object(d.f)();Object(n.useEffect)((function(){var e=localStorage.getItem("admin-token");null!==e&&z.a.post("/admin/verify","",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(){a.push("/admin-profile")})).catch((function(){localStorage.removeItem("admin-token")}))}),[a]);var s=Object(n.useState)({username:"",password:"",adminKey:""}),c=Object(l.a)(s,2),i=c[0],j=c[1],u=Object(n.useState)({username:{error:!1,helperMsg:""},password:{error:!1,helperMsg:""},adminKey:{error:!1,helperMsg:""}}),b=Object(l.a)(u,2),p=b[0],O=b[1],h=Object(n.useState)(!1),N=Object(l.a)(h,2),A=N[0],_=N[1],C=function(){""===i.username?O(Object(o.a)(Object(o.a)({},p),{},{username:{error:!0,helperMsg:"This is a required field."}})):O(Object(o.a)(Object(o.a)({},p),{},{username:{error:!1,helperMsg:""}}))},F=function(){""===i.password?O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!0,helperMsg:"This is a required field."}})):O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!1,helperMsg:""}}))},D=function(){""===i.adminKey?O(Object(o.a)(Object(o.a)({},p),{},{adminKey:{error:!0,helperMsg:"This is a required field."}})):O(Object(o.a)(Object(o.a)({},p),{},{adminKey:{error:!1,helperMsg:""}}))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Admin Login"}),Object(r.jsx)("div",{className:t.toolbarButtons,children:Object(r.jsx)(f.a,{edge:"end",onClick:function(){return e.setType("light"===e.type?"dark":"light")},color:"inherit",children:"light"===e.type?Object(r.jsx)(P.a,{}):Object(r.jsx)(k.a,{})})})]})}),Object(r.jsx)("div",{className:t.toolbar}),Object(r.jsx)(v.a,{maxWidth:"md",className:t.paperMain,children:Object(r.jsx)(w.a,{variant:"outlined",children:Object(r.jsxs)(y.a,{className:t.root,children:[Object(r.jsx)(x.a,{children:"Only for the administrators of this website."}),Object(r.jsx)(T.a,{label:"Username",variant:"outlined",onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{username:e.target.value}))},value:i.username,onBlur:C,helperText:p.username.helperMsg,error:p.username.error,autoFocus:!0,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(T.a,{type:"password",label:"Password",variant:"outlined",onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{password:e.target.value}))},value:i.password,onBlur:F,helperText:p.password.helperMsg,error:p.password.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(T.a,{type:"password",label:"Admin Key",variant:"outlined",onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{adminKey:e.target.value}))},value:i.adminKey,onBlur:D,helperText:p.adminKey.helperMsg,error:p.adminKey.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(S.a,{className:t.ctabtn,color:"primary",variant:"contained",size:"medium",onClick:function(){if(""!==i.username&&""!==i.password&&""!==i.adminKey||(C(),F(),D(),0)){var e=new FormData;e.append("username",i.username),e.append("password",i.password),e.append("adminKey",i.adminKey),_(!0),z.a.post("/admin/login",e).then((function(e){_(!1),localStorage.setItem("admin-token",e.data),a.push("/admin-profile")})).catch((function(e){if(_(!1),500!==e.response.status)switch(e.response.data){case"KEY_ERR":O(Object(o.a)(Object(o.a)({},p),{},{adminKey:{error:!0,helperMsg:"Key Incorrect"}}));break;case"PWORD_ERR":O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!0,helperMsg:"Password Incorrect"}}));break;case"UNAME_ERR":O(Object(o.a)(Object(o.a)({},p),{},{username:{error:!0,helperMsg:"Username Incorrect"}}))}else alert("Server Error, please try again.")}))}},disabled:A,endIcon:A&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:A?"Logging In":"Login"})]})})})]})},E=a(200),I=a.n(E),L=Object(h.a)((function(e){return{updownone:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},toolbar:e.mixins.toolbar,toolbarButtons:{marginLeft:"auto"}}}));var U=function(e){var t=L(),a=Object(d.f)(),s=Object(n.useState)({email:"",password:""}),c=Object(l.a)(s,2),i=c[0],j=c[1],u=Object(n.useState)({email:{error:!1,helperMsg:""},password:{error:!1,helperMsg:""}}),b=Object(l.a)(u,2),p=b[0],O=b[1],h=Object(n.useState)(!1),N=Object(l.a)(h,2),A=N[0],_=N[1],C=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/g.test(e)&&e.length<=100},F=function(e){return/^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})/g.test(e)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{edge:"start",color:"inherit",onClick:a.goBack,children:Object(r.jsx)(I.a,{})}),Object(r.jsx)(x.a,{variant:"h6",children:"User Login"}),Object(r.jsx)("div",{className:t.toolbarButtons,children:Object(r.jsx)(f.a,{edge:"end",onClick:function(){return e.setType("light"===e.type?"dark":"light")},color:"inherit",children:"light"===e.type?Object(r.jsx)(P.a,{}):Object(r.jsx)(k.a,{})})})]})}),Object(r.jsx)("div",{className:t.toolbar}),Object(r.jsx)(v.a,{style:{marginTop:"20px"},maxWidth:"md",children:Object(r.jsx)(w.a,{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Login"}),Object(r.jsx)(T.a,{label:"Email",variant:"outlined",type:"email",className:t.updownone,onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{email:e.target.value})),C(e.target.value)?O(Object(o.a)(Object(o.a)({},p),{},{email:{error:!1,helperMsg:""}})):O(Object(o.a)(Object(o.a)({},p),{},{email:{error:!0,helperMsg:"That doesn't seem like a proper email"}}))},value:i.email,helperText:p.email.helperMsg,error:p.email.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(T.a,{label:"Password",variant:"outlined",type:"password",className:t.updownone,onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{password:e.target.value})),F(e.target.value)?O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!1,helperMsg:""}})):O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!0,helperMsg:"Doesn't seem like a valid password yet"}}))},value:i.password,helperText:p.password.helperMsg,error:p.password.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(S.a,{color:"primary",variant:"contained",size:"medium",disabled:A,onClick:function(){if(C(i.email)&&F(i.password)){var e=new FormData;e.append("email",i.email),e.append("password",i.password),_(!0),z.a.post("/user/login",e).then((function(e){var t=e.data;_(!1),j({email:"",password:""}),localStorage.setItem("user-token",t),a.push("/user")})).catch((function(e){var t=e.response;_(!1),"USER_X"===t.data?O(Object(o.a)(Object(o.a)({},p),{},{email:{error:!0,helperMsg:"This email isn't registered with us"}})):"PWORD_X"===t.data&&O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!0,helperMsg:"Password incorrect"}}))}))}},endIcon:A&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:A?"Logging You In":"Login"})]})})})]})},K=a(515);function W(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var R=Object(h.a)((function(e){return{updownone:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},toolbar:e.mixins.toolbar,toolbarButtons:{marginLeft:"auto"}}}));var q=function(e){var t=R(),a=Object(d.f)(),s=Object(n.useState)({name:"",email:"",password:"",user_signup_key:""}),c=Object(l.a)(s,2),i=c[0],j=c[1],u=Object(n.useState)({name:{error:!1,helperMsg:""},email:{error:!1,helperMsg:""},password:{error:!1,helperMsg:""},user_signup_key:{error:!1,helperMsg:""}}),b=Object(l.a)(u,2),p=b[0],O=b[1],h=Object(n.useState)(!1),N=Object(l.a)(h,2),A=N[0],_=N[1],C=Object(n.useState)({show:!1,type:"",msg:""}),F=Object(l.a)(C,2),B=F[0],D=F[1],E=function(e){return e.length>0&&e.length<=50},L=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/g.test(e)&&e.length<=100},U=function(e){return/^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})/g.test(e)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{edge:"start",color:"inherit",onClick:a.goBack,children:Object(r.jsx)(I.a,{})}),Object(r.jsx)(x.a,{variant:"h6",children:"Create Account"}),Object(r.jsx)("div",{className:t.toolbarButtons,children:Object(r.jsx)(f.a,{edge:"end",onClick:function(){return e.setType("light"===e.type?"dark":"light")},color:"inherit",children:"light"===e.type?Object(r.jsx)(P.a,{}):Object(r.jsx)(k.a,{})})})]})}),Object(r.jsx)("div",{className:t.toolbar}),Object(r.jsx)(v.a,{maxWidth:"md",style:{marginTop:"20px"},children:Object(r.jsx)(w.a,{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Create User"}),Object(r.jsx)(T.a,{label:"Name",variant:"outlined",type:"text",className:t.updownone,onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{name:e.target.value})),E(e.target.value)?O(Object(o.a)(Object(o.a)({},p),{},{name:{error:!1,helperMsg:""}})):O(Object(o.a)(Object(o.a)({},p),{},{name:{error:!0,helperMsg:"Name can't be blank and must be <= 50 characters"}}))},value:i.name,helperText:p.name.helperMsg,error:p.name.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(T.a,{label:"Email",variant:"outlined",type:"email",className:t.updownone,onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{email:e.target.value})),L(e.target.value)?O(Object(o.a)(Object(o.a)({},p),{},{email:{error:!1,helperMsg:""}})):O(Object(o.a)(Object(o.a)({},p),{},{email:{error:!0,helperMsg:"That doesn't seem like a proper email"}}))},value:i.email,helperText:p.email.helperMsg,error:p.email.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(T.a,{label:"Password",variant:"outlined",type:"password",className:t.updownone,onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{password:e.target.value})),U(e.target.value)?O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!1,helperMsg:""}})):O(Object(o.a)(Object(o.a)({},p),{},{password:{error:!0,helperMsg:"Password very weak. Must contain atleast two of these - Uppercase, Lowercase, Numbers"}}))},value:i.password,helperText:p.password.helperMsg,error:p.password.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(T.a,{label:"Signup Key",variant:"outlined",type:"text",className:t.updownone,onChange:function(e){j(Object(o.a)(Object(o.a)({},i),{},{user_signup_key:e.target.value})),E(e.target.value)?O(Object(o.a)(Object(o.a)({},p),{},{user_signup_key:{error:!1,helperMsg:""}})):O(Object(o.a)(Object(o.a)({},p),{},{user_signup_key:{error:!0,helperMsg:"Key can't be blank"}}))},value:i.user_signup_key,helperText:p.user_signup_key.helperMsg,error:p.user_signup_key.error,required:!0,fullWidth:!0,disabled:A}),Object(r.jsx)(S.a,{color:"primary",variant:"contained",size:"medium",disabled:A,onClick:function(){if(E(i.name)&&L(i.email)&&U(i.password)&&E(i.user_signup_key)){var e=new FormData;e.append("name",i.name),e.append("password",i.password),e.append("email",i.email),e.append("user_signup_key",i.user_signup_key),_(!0),z.a.post("/user/signup",e).then((function(){_(!1),D({show:!0,type:"success",msg:"User Added Successfully"}),j({name:"",email:"",password:"",user_signup_key:""})})).catch((function(e){var t=e.response;_(!1),"KEY_ERR"===t.data?O(Object(o.a)(Object(o.a)({},p),{},{user_signup_key:{error:!0,helperMsg:"Key Incorrect"}})):"EMAIL_EXISTS"===t.data?O(Object(o.a)(Object(o.a)({},p),{},{email:{error:!0,helperMsg:"An account with that email already exists"}})):D({show:!0,type:"error",msg:"Server Error"})}))}},endIcon:A&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:A?"Signing Up":"Sign Up"}),B.show&&Object(r.jsx)(W,{className:t.updownone,severity:B.type,onClose:function(){D(Object(o.a)(Object(o.a)({},B),{},{show:!1}))},children:B.msg})]})})})]})},G=a(517),Z=a(480),H=a(481),Y=a(513),X=a(330),$=a(361),J=a.n($),Q=a(206),V=a.n(Q),ee=a(362),te=a.n(ee),ae=a(363),re=a.n(ae),ne=a(364),se=a.n(ne),ce=a(365),ie=a.n(ce),oe=a(366),le=a.n(oe),je=a(367),de=a.n(je),ue=Object(h.a)((function(e){return{usKey:{margin:e.spacing(2)}}}));var be=function(e){var t=ue(),a=Object(n.useState)(""),s=Object(l.a)(a,2),c=s[0],i=s[1];return Object(r.jsx)(w.a,{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"User Signup Key"}),Object(r.jsx)(x.a,{className:t.usKey,variant:"h5",children:c}),Object(r.jsx)(S.a,{color:"primary",variant:"contained",size:"medium",onClick:function(){""===c?function(){var t=new FormData;t.append("type","see"),e.Axios.post("/admin/user-signup-key",t).then((function(e){i((function(){return e.data}))})).catch((function(){i((function(){return"Some Error Occured"}))}))}():function(){var t=new FormData;t.append("type","change"),e.Axios.post("/admin/user-signup-key",t).then((function(e){i((function(){return e.data}))})).catch((function(){i((function(){return"Some Error Occured"}))}))}()},children:""===c?"Show Key":"Change Key"})]})})};function pe(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Oe=Object(h.a)((function(e){return{ctabtn:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var he=function(e){var t=Oe(),a=Object(n.useState)(!1),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)([]),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(!1),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)(!1),f=Object(l.a)(g,2),v=f[0],N=f[1];return Object(r.jsx)(w.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Active Users"}),Object(r.jsx)(x.a,{className:t.ctabtn,children:"Users with activity in last 20 minutes"}),0!==u.length&&Object(r.jsx)(Z.a,{className:t.ctabtn,dense:!0,children:u.map((function(e,t){return Object(r.jsx)(H.a,{children:Object(r.jsx)(X.a,{children:e.u_name})},t)}))}),v&&0===u.length&&Object(r.jsx)(x.a,{children:"Oops, nobody seems to be active recently."}),Object(r.jsx)(S.a,{className:t.ctabtn,color:"primary",variant:"contained",size:"medium",onClick:function(){i(!0),e.Axios.post("/admin/active-users").then((function(e){var t=e.data;i(!1),b(t),N(!0)})).catch((function(){b([]),i(!1),m(!0)}))},disabled:c,endIcon:c&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:c?"Loading":"Refresh Users"}),h&&Object(r.jsx)(pe,{className:t.ctabtn,severity:"error",onClose:function(){m(!1)},children:"Server Error Occured"})]})}))},me=Object(h.a)((function(e){return{updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var ge=function(e){var t=me(),a=e.Axios;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(be,{className:t.updownspace,Axios:a}),Object(r.jsx)(he,{className:t.updownspace,Axios:a})]})},xe=a(154),fe=a.n(xe),ve=a(104),we=Object(h.a)((function(e){return{paperthis:{marginTop:e.spacing(1),padding:e.spacing(2),textAlign:"center"}}}));var ye=function(e){var t=we(),a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)({}),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)({}),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)(!1),x=Object(l.a)(g,2),f=x[0],v=x[1],w=Object(n.useState)(!1),y=Object(l.a)(w,2),S=y[0],N=y[1],k=Object(n.useState)(!1),A=Object(l.a)(k,2),P=A[0],_=A[1];Object(n.useEffect)((function(){C()}),[C]);var C=function(){e.Axios.post("/admin/list-groups").then((function(e){var t=e.data.reduce((function(e,t){return e[t.g_id]=t.g_name,e}),{});N(!0),b(t)})).catch((function(){return alert("Server Error")})),e.Axios.post("/admin/all-pdfs").then((function(e){var t=e.data.reduce((function(e,t){return e[t.file_id]=t.file_name,e}),{});_(!0),m(t)})).catch((function(){return alert("Server Error")})),e.Axios.post("/admin/all-permissions").then((function(e){var t=e.data;v(!0),i(t)})).catch((function(){return alert("Server Error")}))};return Object(r.jsxs)("div",Object(o.a)(Object(o.a)({},e),{},{children:[(!f||!S||!P)&&Object(r.jsxs)(ve.a,{className:t.paperthis,elevation:0,children:[Object(r.jsx)(M.a,{size:25,color:"secondary"}),Object(r.jsx)("div",{children:"Loading ..."})]}),f&&S&&P&&Object(r.jsx)(fe.a,{title:"",data:c,columns:[{title:"Group",field:"g_id",lookup:u},{title:"File Name",field:"file_id",lookup:h}],editable:{onRowAdd:function(t){return new Promise((function(a,r){var n=new FormData;n.append("g_id",t.g_id),n.append("file_id",t.file_id),e.Axios.post("/admin/assign-file-to-group",n).then((function(){C(),a()})).catch((function(){C(),a()}))}))},onRowDelete:function(t){return new Promise((function(a,r){var n=new FormData;n.append("g_id",t.g_id),n.append("file_id",t.file_id),e.Axios.post("/admin/remove-file-from-group",n).then((function(){C(),a()})).catch((function(){C(),a()}))}))}}})]}))},Se=Object(h.a)((function(e){return{updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var Ne=function(e){var t=Se(),a=e.Axios;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(ye,{className:t.updownspace,Axios:a})})};function ke(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Ae=Object(h.a)((function(e){return{marginupdown:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var Pe=function(e){var t=Ae(),a=Object(n.useState)(""),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)({error:!1,helperMsg:""}),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(!1),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)({show:!1,type:"",msg:""}),f=Object(l.a)(g,2),v=f[0],N=f[1],k=function(e){return e.length>0&&e.length<=50};return Object(r.jsx)(w.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Create Group"}),Object(r.jsx)(T.a,{className:t.marginupdown,label:"Group Name",variant:"outlined",type:"text",onChange:function(e){i(e.target.value),k(e.target.value)?b({error:!1,helperMsg:""}):b({error:!0,helperMsg:"Group Name is required and must be less than 50 characters"})},value:c,helperText:u.helperMsg,error:u.error,required:!0,fullWidth:!0,disabled:h}),Object(r.jsx)(S.a,{className:t.marginupdown,color:"primary",variant:"contained",size:"medium",onClick:function(){if(k(c)){m(!0);var t=new FormData;t.append("g_name",c),e.Axios.post("/admin/create-group",t).then((function(){m(!1),N({show:!0,type:"success",msg:"Group successfully created"}),i(""),b({error:!1,helperMsg:""})})).catch((function(e){var t=e.response.data;switch(m(!1),t){case"GNAME_DUP":b({error:!0,helperMsg:"Duplicate Group Names not allowed"});break;default:N({show:!0,type:"error",msg:"Server Error"})}}))}},disabled:h,endIcon:h&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:"Create"}),v.show&&Object(r.jsx)(ke,{className:t.marginupdown,onClose:function(){N(Object(o.a)(Object(o.a)({},v),{},{show:!1}))},severity:v.type,children:v.msg})]})}))},_e=a(348),Ce=a(346),Te=a(338),Me=a(332),Fe=a(337),ze=a(503),Be=a(511),De=a(504),Ee=a(510),Ie=a(505);function Le(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Ue=Object(h.a)((function(e){return{marginupdown:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var Ke=function(e){var t=Ue(),a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)(!1),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)({show:!1,type:"",msg:""}),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)(!1),f=Object(l.a)(g,2),v=f[0],N=f[1],k=Object(n.useState)({id:-1,name:""}),A=Object(l.a)(k,2),P=A[0],_=A[1],C=function(){b(!0),e.Axios.post("/admin/list-groups").then((function(e){var t=e.data;b(!1),i(t)})).catch((function(){b(!1),m({show:!0,type:"error",msg:"Server Error"})}))},T=function(){N(!1)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"All Groups"}),Object(r.jsx)(x.a,{children:"Please Note that deletion is permanent and irrevokable"}),0!==c.length&&Object(r.jsxs)(_e.a,{size:"small",children:[Object(r.jsx)(Ce.a,{children:Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(Me.a,{children:"Group Name"}),Object(r.jsx)(Me.a,{})]})}),Object(r.jsx)(Fe.a,{children:c.map((function(e){return Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(Me.a,{children:e.g_name}),Object(r.jsx)(Me.a,{children:Object(r.jsx)(S.a,{color:"secondary",size:"small",variant:"outlined",onClick:function(){_({id:e.g_id,name:e.g_name}),N(!0)},disabled:u,endIcon:u&&Object(r.jsx)(M.a,{color:"secondary",size:18}),children:"Delete"})})]},e.g_id)}))})]}),Object(r.jsx)(S.a,{className:t.marginupdown,color:"secondary",size:"small",variant:"outlined",onClick:C,disabled:u,endIcon:u&&Object(r.jsx)(M.a,{color:"secondary",size:18}),children:"Load All"}),h.show&&Object(r.jsx)(Le,{className:t.marginupdown,onClose:function(){m(Object(o.a)(Object(o.a)({},h),{},{show:!1}))},severity:h.type,children:h.msg})]})})),Object(r.jsxs)(ze.a,{open:v,onClose:T,children:[Object(r.jsxs)(Be.a,{children:["Are you sure you want to delete ",P.name,"?"]}),Object(r.jsx)(De.a,{children:Object(r.jsx)(Ee.a,{children:"Deletion of a group is permanent. This will remove all permissions of all users under this group as well. This action is irrevokeable."})}),Object(r.jsxs)(Ie.a,{children:[Object(r.jsx)(S.a,{onClick:T,color:"primary",children:"Cancel"}),Object(r.jsx)(S.a,{onClick:function(){!function(t,a){b(!0);var r=new FormData;r.append("g_id",t),e.Axios.post("/admin/delete-group",r).then((function(){b(!1),m({show:!0,type:"success",msg:"Group ".concat(a," deleted")}),C()})).catch((function(){b(!1),m({show:!0,type:"error",msg:"Server Error"})}))}(P.id,P.name),N(!1)},color:"primary",children:"Delete"})]})]})]})},We=Object(h.a)((function(e){return{updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var Re=function(e){var t=We(),a=e.Axios;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Pe,{className:t.updownspace,Axios:a}),Object(r.jsx)(Ke,{className:t.updownspace,Axios:a})]})},qe=Object(h.a)((function(e){return{btn:{marginTop:e.spacing(2)}}}));function Ge(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Ze=function(e){var t=qe(),a=Object(n.useState)(new File([],"")),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)(!1),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(""),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)({error:!1,helperMsg:""}),f=Object(l.a)(g,2),v=f[0],N=f[1],k=Object(n.useState)(!1),A=Object(l.a)(k,2),P=A[0],_=A[1],C=Object(n.useState)({done:!1,success:!1,message:""}),F=Object(l.a)(C,2),z=F[0],B=F[1];return Object(r.jsx)(w.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{variant:"h6",children:"Add PDF File"}),Object(r.jsx)(x.a,{children:"You can add a PDF File from this option. It takes some time to convert the PDF File on the server so please wait for some time to see the file reflect in other settings."}),Object(r.jsx)(T.a,{className:t.btn,label:"File Name",variant:"outlined",type:"text",onChange:function(e){m(e.target.value)},value:h,required:!0,fullWidth:!0,disabled:P,error:v.error,helperText:v.helperMsg}),Object(r.jsxs)(S.a,{className:t.btn,color:"secondary",size:"small",variant:"outlined",component:"label",disabled:P,children:["Choose File",Object(r.jsx)("input",{type:"file",accept:".pdf",style:{display:"none"},onChange:function(e){1===e.target.files.length&&(b(!0),i(e.target.files[0]))}})]}),Object(r.jsx)(x.a,{children:u?"Selected: ".concat(c.name):"No File Chosen"}),Object(r.jsx)(S.a,{className:t.btn,color:"primary",size:"medium",variant:"contained",disabled:P,onClick:function(){if(u&&""!==h){N({error:!1,helperMsg:""}),_(!0);var t=new FormData;t.append("pdf-file",c),t.append("file-name",h),e.Axios.post("/admin/pdf-upload",t).then((function(){_(!1),b(!1),m(""),i(new File([],"")),B({done:!0,success:!0,message:"Uploaded Successfully"})})).catch((function(e){var t,a=e.response;switch(_(!1),b(!1),m(""),i(new File([],"")),a.data){case"PDF_100+":t="PDF has 100+ pages";break;case"PROCESSING":t="Previous File is getting processed";break;case"NOT_PDF":t="Uploaded file was not a PDF";break;default:t="Server Error occured"}B({done:!0,success:!1,message:t})}))}else N({error:!0,helperMsg:"The file as well as it's name - both are required!"})},endIcon:P&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:P?"Uploading":"Upload"}),z.done&&Object(r.jsx)(Ge,{className:t.btn,severity:z.success?"success":"error",onClose:function(){B(Object(o.a)(Object(o.a)({},z),{},{done:!1}))},children:z.message})]})}))},He=a(485),Ye=a(240),Xe=a(506),$e=a(205),Je=a.n($e),Qe=a(204),Ve=a.n(Qe);function et(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var tt=Object(h.a)((function(e){return{ctabtn:{marginTop:e.spacing(2),marginBottom:e.spacing(1)},mainTypo:{marginBottom:e.spacing(1)},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},toolbar:e.mixins.toolbar,paperthis:{marginTop:e.spacing(1),padding:e.spacing(2),textAlign:"center"},w_100:{width:"100%"}}})),at=s.a.forwardRef((function(e,t){return Object(r.jsx)(He.a,Object(o.a)({direction:"up",ref:t},e))}));var rt=function(e){var t=tt(),a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)(!1),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(""),O=Object(l.a)(p,2),h=O[0],v=O[1],N=Object(n.useState)(!1),k=Object(l.a)(N,2),A=k[0],P=k[1],_=Object(n.useState)([]),C=Object(l.a)(_,2),T=C[0],F=C[1],z=Object(n.useState)(!1),B=Object(l.a)(z,2),D=B[0],E=B[1],I=Object(n.useState)({show:!1,type:"",msg:""}),L=Object(l.a)(I,2),U=L[0],K=L[1],W=Object(n.useState)(!1),R=Object(l.a)(W,2),q=R[0],G=R[1],Z=Object(n.useState)({id:-1,name:""}),H=Object(l.a)(Z,2),Y=H[0],X=H[1],$=function(){e.Axios.post("/admin/all-pdfs").then((function(e){var t=e.data;i(t),E(!0)}))};Object(n.useEffect)((function(){$()}),[]);var J=function(){b(!1),F([])},Q=function(){G(!1)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{className:t.mainTypo,variant:"h6",children:"See All PDFs"}),D&&0===c.length&&Object(r.jsx)(x.a,{children:"No files to display"}),0!==c.length&&Object(r.jsxs)(_e.a,{size:"small",children:[Object(r.jsx)(Ce.a,{children:Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(Me.a,{children:"PDF Name"}),Object(r.jsx)(Me.a,{children:"Open PDF"}),Object(r.jsx)(Me.a,{children:"Delete PDF"})]})}),Object(r.jsx)(Fe.a,{children:c.map((function(t){return Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(Me.a,{children:t.file_name}),Object(r.jsx)(Me.a,{children:Object(r.jsx)(S.a,{color:"secondary",size:"small",variant:"outlined",onClick:function(){!function(t,a){v(a),b(!0),P(!0);var r=new FormData;r.append("file_id",t),e.Axios.request({method:"POST",url:"/admin/see-pdf",data:r,responseType:"arraybuffer",responseEncoding:"binary"}).then((function(e){var t=e.data,a=new Ve.a;a.loadAsync(t).then((function(e){for(var t=Object.keys(e.files).length/12,r=new Array(t),n=0;n<t;n++)r[n]=new Array(12);for(var s=[],c=function(){var e=o[i];s.push(new Promise((function(t,r){a.file(e).async("base64").then((function(a){var r=/(\d+)-(\d+).jpg/g.exec(e)[1],n=/(\d+)-(\d+).jpg/g.exec(e)[2];t({pgNo:r,colNo:n,val:"data:image/jpg;base64,"+a})})).catch((function(){return r()}))})))},i=0,o=Object.keys(e.files);i<o.length;i++)c();Promise.all(s).then((function(e){for(var t=0;t<e.length;t++)r[e[t].pgNo][e[t].colNo]=e[t].val;F(r),P(!1)}))}))}))}(t.file_id,t.file_name)},children:"Open"})}),Object(r.jsx)(Me.a,{children:Object(r.jsx)(S.a,{color:"secondary",size:"small",variant:"outlined",onClick:function(){X({id:t.file_id,name:t.file_name}),G(!0)},children:"Del"})})]},t.file_id)}))})]}),Object(r.jsx)(S.a,{className:t.ctabtn,color:"secondary",size:"small",variant:"outlined",onClick:$,children:"Load All"}),U.show&&Object(r.jsx)(et,{className:t.ctabtn,onClose:function(){K(Object(o.a)(Object(o.a)({},U),{},{show:!1}))},severity:U.type,children:U.msg})]})})),Object(r.jsxs)(ze.a,{fullScreen:!0,open:u,onClose:J,TransitionComponent:at,children:[Object(r.jsx)(m.a,{position:"static",className:t.appBar,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{edge:"start",color:"inherit",onClick:J,children:Object(r.jsx)(Je.a,{})}),Object(r.jsx)(x.a,{className:t.title,variant:"h6",children:h})]})}),Object(r.jsx)("div",{className:t.toolbar}),A&&Object(r.jsxs)(ve.a,{className:t.paperthis,elevation:0,children:[Object(r.jsx)(M.a,{size:25,color:"secondary"}),Object(r.jsx)("div",{children:"Loading ..."})]}),0!==T.length&&Object(r.jsx)(Ye.a,{displayPrint:"none",children:Object(r.jsx)(Xe.a,{container:!0,spacing:0,children:T.map((function(e,a){return Object(r.jsx)(Xe.a,{container:!0,xs:12,spacing:0,children:e.map((function(e,a){return Object(r.jsx)(Xe.a,{xs:1,item:!0,children:Object(r.jsx)("img",{src:e,className:t.w_100,alt:""})},a)}))},a)}))})})]}),Object(r.jsxs)(ze.a,{open:q,onClose:Q,children:[Object(r.jsxs)(Be.a,{children:["Are you sure you want to delete ",Y.name,"?"]}),Object(r.jsx)(De.a,{children:Object(r.jsx)(Ee.a,{children:"Deletion of a file is permanent. This will remove all permissions of any groups having access to this file as well. This action is irrevokeable."})}),Object(r.jsxs)(Ie.a,{children:[Object(r.jsx)(S.a,{onClick:Q,color:"primary",children:"Cancel"}),Object(r.jsx)(S.a,{onClick:function(){!function(t,a){P(!0);var r=new FormData;r.append("file_id",t),e.Axios.post("/admin/delete-pdf",r).then((function(){K({show:!0,type:"success",msg:"".concat(a," successfully deleted")}),P(!1),$()})).catch((function(){P(!1),K({show:!0,type:"error",msg:"Server Error Occured"})}))}(Y.id,Y.name),G(!1)},color:"primary",children:"Delete"})]})]})]})},nt=Object(h.a)((function(e){return{updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var st=function(e){var t=nt(),a=e.Axios;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ze,{className:t.updownspace,Axios:a}),Object(r.jsx)(rt,{className:t.updownspace,Axios:a})]})};function ct(e){return Object(r.jsx)(K.a,Object(o.a)({elevation:6,variant:"filled"},e))}var it=Object(h.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:e.spacing(2)}},ctabtn:{marginTop:e.spacing(3)}}}));var ot=function(e){var t=it(),a=Object(n.useState)({oldPassword:"",newPassword:"",retypeNewPassword:""}),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)({oldPassword:{error:!1,helperMsg:""},newPassword:{error:!1,helperMsg:""},retypeNewPassword:{error:!1,helperMsg:""}}),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(!1),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)(!1),f=Object(l.a)(g,2),v=f[0],N=f[1];return Object(r.jsx)(w.a,Object(o.a)(Object(o.a)({variant:"outlined"},e),{},{children:Object(r.jsxs)(y.a,{className:t.root,children:[Object(r.jsx)(x.a,{variant:"h6",children:"Change Password"}),Object(r.jsx)(T.a,{label:"Old Password",variant:"outlined",type:"password",onChange:function(e){i(Object(o.a)(Object(o.a)({},c),{},{oldPassword:e.target.value}))},value:c.oldPassword,onBlur:function(){b(Object(o.a)(Object(o.a)({},u),{},{oldPassword:{error:!1,helperMsg:""}}))},helperText:u.oldPassword.helperMsg,error:u.oldPassword.error,required:!0,fullWidth:!0,disabled:h}),Object(r.jsx)(T.a,{label:"New Password",variant:"outlined",type:"password",onChange:function(e){i(Object(o.a)(Object(o.a)({},c),{},{newPassword:e.target.value})),new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(e.target.value)?b(Object(o.a)(Object(o.a)({},u),{},{newPassword:{error:!1,helperMsg:""}})):b(Object(o.a)(Object(o.a)({},u),{},{newPassword:{error:!0,helperMsg:"Admin Password must contain atleast 1 lowercase, 1 uppercase, 1 number and a special character"}}))},value:c.newPassword,helperText:u.newPassword.helperMsg,error:u.newPassword.error,required:!0,fullWidth:!0,disabled:h}),Object(r.jsx)(T.a,{label:"Retype New Password",variant:"outlined",type:"password",onChange:function(e){i(Object(o.a)(Object(o.a)({},c),{},{retypeNewPassword:e.target.value})),c.newPassword!==e.target.value?b(Object(o.a)(Object(o.a)({},u),{},{retypeNewPassword:{error:!0,helperMsg:"Passwords don't match"}})):b(Object(o.a)(Object(o.a)({},u),{},{retypeNewPassword:{error:!1,helperMsg:""}}))},value:c.retypeNewPassword,helperText:u.retypeNewPassword.helperMsg,error:u.retypeNewPassword.error,required:!0,fullWidth:!0,disabled:h}),Object(r.jsx)(S.a,{className:t.ctabtn,color:"primary",variant:"contained",size:"medium",onClick:function(){if(!1===u.oldPassword.error&&!1===u.newPassword.error&&!1===u.retypeNewPassword.error){var t=new FormData;t.append("oldPassword",c.oldPassword),t.append("newPassword",c.newPassword),t.append("retypeNewPassword",c.retypeNewPassword),m(!0),e.Axios.post("/admin/change-password",t).then((function(){m(!1),i({oldPassword:"",newPassword:"",retypeNewPassword:""}),b({oldPassword:{error:!1,helperMsg:""},newPassword:{error:!1,helperMsg:""},retypeNewPassword:{error:!1,helperMsg:""}}),N(!0)})).catch((function(e){m(!1);var t=e.response.data.field,a=e.response.data.msg;switch(t){case"oldPassword":b(Object(o.a)(Object(o.a)({},u),{},{oldPassword:{error:!0,helperMsg:a}}));break;case"newPassword":b(Object(o.a)(Object(o.a)({},u),{},{newPassword:{error:!0,helperMsg:a}}));break;case"retypeNewPassword":b(Object(o.a)(Object(o.a)({},u),{},{retypeNewPassword:{error:!0,helperMsg:a}}))}}))}},disabled:h,endIcon:h&&Object(r.jsx)(M.a,{color:"secondary",size:20}),children:h?"Updating":"Update"}),v&&Object(r.jsx)(ct,{className:t.ctabtn,severity:"success",onClose:function(){N(!1)},children:"Password Changed Successfully"})]})}))},lt=Object(h.a)((function(e){return{updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var jt=function(e){var t=lt(),a=e.Axios;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ot,{className:t.updownspace,Axios:a}),Object(r.jsx)(be,{className:t.updownspace,Axios:a})]})},dt=Object(h.a)((function(e){return{paperthis:{marginTop:e.spacing(1),padding:e.spacing(2),textAlign:"center"}}}));var ut=function(e){var t=dt(),a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],i=s[1],j=Object(n.useState)({}),d=Object(l.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(!1),O=Object(l.a)(p,2),h=O[0],m=O[1],g=Object(n.useState)(!1),x=Object(l.a)(g,2),f=x[0],v=x[1];Object(n.useEffect)((function(){w()}),[w]);var w=function(){m(!1),e.Axios.post("/admin/list-groups").then((function(e){var t=e.data.reduce((function(e,t){return e[t.g_id]=t.g_name,e}),{null:"No Group"});v(!0),b(t)})).catch((function(){return alert("Server Error")})),e.Axios.post("/admin/all-users").then((function(e){var t=e.data;i(t),m(!0)})).catch((function(){return alert("Server Error")}))};return Object(r.jsxs)("div",Object(o.a)(Object(o.a)({},e),{},{children:[(!h||!f)&&Object(r.jsxs)(ve.a,{className:t.paperthis,elevation:0,children:[Object(r.jsx)(M.a,{size:25,color:"secondary"}),Object(r.jsx)("div",{children:"Loading ..."})]}),h&&f&&Object(r.jsx)(fe.a,{title:"",data:c,columns:[{title:"User Name",field:"u_name",editable:"never"},{title:"Group",field:"u_grpid",lookup:u},{title:"Email ID",field:"u_email",editable:"never"}],editable:{onRowUpdate:function(t,a){return new Promise((function(r,n){if(String(a.u_grpid)!==String(t.u_grpid)){var s=new FormData;s.append("g_id",t.u_grpid),s.append("u_id",t.u_id),e.Axios.post("/admin/assign-group-to-user",s).then((function(){w(),r()})).catch((function(){w(),r()}))}else r()}))},onRowDelete:function(t){return new Promise((function(a,r){var n=new FormData;n.append("u_id",t.u_id),e.Axios.post("/admin/terminate-user",n).then((function(){w(),a()})).catch((function(){w(),a()}))}))}}})]}))},bt=Object(h.a)((function(e){return{updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var pt=function(e){var t=bt(),a=e.Axios;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(ut,{className:t.updownspace,Axios:a})})},Ot=Object(h.a)((function(e){return{title:{flexGrow:1},updownspace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},toolbar:e.mixins.toolbar,menuButton:{marginRight:e.spacing(2)},toolbarButtons:{marginLeft:"auto"}}})),ht=function(e){var t=e.winSelect,a=e.Axios;switch(t){case 0:return Object(r.jsx)(ge,{Axios:a});case 1:return Object(r.jsx)(Ne,{Axios:a});case 2:return Object(r.jsx)(Re,{Axios:a});case 3:return Object(r.jsx)(st,{Axios:a});case 4:return Object(r.jsx)(jt,{Axios:a});case 5:return Object(r.jsx)(pt,{Axios:a})}};var mt=function(e){var t=Object(d.f)(),a=Ot(),s=Object(n.useState)(!1),c=Object(l.a)(s,2),i=c[0],o=c[1],j=Object(n.useState)(0),u=Object(l.a)(j,2),b=u[0],p=u[1],O=Object(n.useState)("Administrator"),h=Object(l.a)(O,2),w=h[0],y=h[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("admin-token");null!==e?z.a.post("/admin/verify","",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(){z.a.defaults.headers.common={Authorization:"Bearer ".concat(e)},z.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(localStorage.removeItem("admin-token"),t.push("/admin")),Promise.reject(e)}))})).catch((function(){localStorage.removeItem("admin-token"),t.push("/admin")})):t.push("/admin")}),[t]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{edge:"start",className:a.menuButton,onClick:function(){o(!i)},color:"inherit",children:Object(r.jsx)(J.a,{})}),Object(r.jsx)(x.a,{variant:"h6",className:a.title,children:w}),Object(r.jsxs)("div",{className:a.toolbarButtons,children:[Object(r.jsx)(f.a,{edge:"end",onClick:function(){return e.setType("light"===e.type?"dark":"light")},color:"inherit",children:"light"===e.type?Object(r.jsx)(P.a,{}):Object(r.jsx)(k.a,{})}),Object(r.jsx)(f.a,{edge:"end",onClick:function(){localStorage.removeItem("admin-token"),t.push("/admin")},color:"inherit",children:Object(r.jsx)(V.a,{})})]})]})}),Object(r.jsx)(G.a,{open:i,onOpen:function(){return o(!0)},onClose:function(){return o(!1)},children:Object(r.jsxs)(Z.a,{children:[Object(r.jsxs)(H.a,{button:!0,onClick:function(){p(0),y("Home"),o(!1)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(te.a,{})}),Object(r.jsx)(X.a,{primary:"Home"})]}),Object(r.jsxs)(H.a,{button:!0,onClick:function(){p(1),y("Access"),o(!1)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(re.a,{})}),Object(r.jsx)(X.a,{primary:"Access"})]}),Object(r.jsxs)(H.a,{button:!0,onClick:function(){p(3),y("Documents"),o(!1)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(se.a,{})}),Object(r.jsx)(X.a,{primary:"Documents"})]}),Object(r.jsxs)(H.a,{button:!0,onClick:function(){p(2),y("Group"),o(!1)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(ie.a,{})}),Object(r.jsx)(X.a,{primary:"Group"})]}),Object(r.jsxs)(H.a,{button:!0,onClick:function(){p(5),y("Users"),o(!1)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(le.a,{})}),Object(r.jsx)(X.a,{primary:"Users"})]}),Object(r.jsxs)(H.a,{button:!0,onClick:function(){p(4),y("Settings"),o(!1)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(de.a,{})}),Object(r.jsx)(X.a,{primary:"Settings"})]})]})}),Object(r.jsx)("div",{className:a.toolbar}),Object(r.jsx)(v.a,{maxWidth:"md",children:Object(r.jsx)(ht,{winSelect:b,Axios:z.a})})]})},gt=Object(h.a)((function(e){return{ctabtn:{marginTop:e.spacing(2),marginBottom:e.spacing(1)},mainTypo:{marginBottom:e.spacing(1)},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},toolbar:e.mixins.toolbar,paperthis:{marginTop:e.spacing(1),padding:e.spacing(2),textAlign:"center"},w_100:{width:"100%"}}})),xt=s.a.forwardRef((function(e,t){return Object(r.jsx)(He.a,Object(o.a)({direction:"up",ref:t},e))}));var ft=function(e){var t=gt(),a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],i=s[1],o=Object(n.useState)(!1),j=Object(l.a)(o,2),d=j[0],u=j[1],b=Object(n.useState)(""),p=Object(l.a)(b,2),O=p[0],h=p[1],v=Object(n.useState)(!1),N=Object(l.a)(v,2),k=N[0],A=N[1],P=Object(n.useState)([]),_=Object(l.a)(P,2),C=_[0],T=_[1],F=Object(n.useState)(!1),z=Object(l.a)(F,2),B=z[0],D=z[1],E=function(){e.Axios.post("/user/all-pdfs").then((function(e){var t=e.data;i(t),D(!0)}))};Object(n.useEffect)((function(){E()}),[]);var I=function(){u(!1),T([])};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,{children:Object(r.jsxs)(y.a,{children:[Object(r.jsx)(x.a,{className:t.mainTypo,variant:"h6",children:"Available PDFs"}),B&&0===c.length&&Object(r.jsx)(x.a,{children:"No files to display"}),0!==c.length&&Object(r.jsxs)(_e.a,{size:"small",children:[Object(r.jsx)(Ce.a,{children:Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(Me.a,{children:"PDF Name"}),Object(r.jsx)(Me.a,{children:"Open PDF"})]})}),Object(r.jsx)(Fe.a,{children:c.map((function(t){return Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(Me.a,{children:t.file_name}),Object(r.jsx)(Me.a,{children:Object(r.jsx)(S.a,{color:"secondary",size:"small",variant:"outlined",onClick:function(){!function(t,a){h(a),u(!0),A(!0);var r=new FormData;r.append("file_id",t),e.Axios.request({method:"POST",url:"/user/see-pdf",data:r,responseType:"arraybuffer",responseEncoding:"binary"}).then((function(e){var t=e.data,a=new Ve.a;a.loadAsync(t).then((function(e){for(var t=Object.keys(e.files).length/12,r=new Array(t),n=0;n<t;n++)r[n]=new Array(12);for(var s=[],c=function(){var e=o[i];s.push(new Promise((function(t,r){a.file(e).async("base64").then((function(a){var r=/(\d+)-(\d+).jpg/g.exec(e)[1],n=/(\d+)-(\d+).jpg/g.exec(e)[2];t({pgNo:r,colNo:n,val:"data:image/jpg;base64,"+a})})).catch((function(){return r()}))})))},i=0,o=Object.keys(e.files);i<o.length;i++)c();Promise.all(s).then((function(e){for(var t=0;t<e.length;t++)r[e[t].pgNo][e[t].colNo]=e[t].val;T(r),A(!1)}))}))}))}(t.file_id,t.file_name)},children:"Open"})})]},t.file_id)}))})]}),Object(r.jsx)(S.a,{className:t.ctabtn,color:"secondary",size:"small",variant:"outlined",onClick:E,children:"Load All"})]})}),Object(r.jsxs)(ze.a,{fullScreen:!0,open:d,onClose:I,TransitionComponent:xt,children:[Object(r.jsx)(m.a,{position:"static",className:t.appBar,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{edge:"start",color:"inherit",onClick:I,children:Object(r.jsx)(Je.a,{})}),Object(r.jsx)(x.a,{className:t.title,variant:"h6",children:O})]})}),Object(r.jsx)("div",{className:t.toolbar}),k&&Object(r.jsxs)(ve.a,{className:t.paperthis,elevation:0,children:[Object(r.jsx)(M.a,{size:25,color:"secondary"}),Object(r.jsx)("div",{children:"Loading ..."})]}),0!==C.length&&Object(r.jsx)(Ye.a,{displayPrint:"none",children:Object(r.jsx)(Xe.a,{container:!0,spacing:0,children:C.map((function(e,a){return Object(r.jsx)(Xe.a,{container:!0,xs:12,spacing:0,children:e.map((function(e,a){return Object(r.jsx)(Xe.a,{xs:1,item:!0,children:Object(r.jsx)("img",{src:e,className:t.w_100,alt:""})},a)}))},a)}))})})]})]})},vt=Object(h.a)((function(e){return{title:{flexGrow:1},toolbar:e.mixins.toolbar,toolbarButtons:{marginLeft:"auto"}}}));var wt=function(e){var t=Object(d.f)(),a=vt(),s=Object(n.useState)(!0),c=Object(l.a)(s,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("user-token");null!==e?z.a.post("/user/verify","",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(){z.a.defaults.headers.common={Authorization:"Bearer ".concat(e)},z.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(localStorage.removeItem("user-token"),t.push("/login")),Promise.reject(e)})),o(!1)})).catch((function(){localStorage.removeItem("user-token"),t.push("/login"),o(!1)})):t.push("/login")}),[t,o]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(x.a,{variant:"h6",className:a.title,children:"Welcome!"}),Object(r.jsxs)("div",{className:a.toolbarButtons,children:[Object(r.jsx)(f.a,{edge:"end",onClick:function(){return e.setType("light"===e.type?"dark":"light")},color:"inherit",children:"light"===e.type?Object(r.jsx)(P.a,{}):Object(r.jsx)(k.a,{})}),Object(r.jsx)(f.a,{edge:"end",onClick:function(){localStorage.removeItem("user-token"),t.push("/login")},color:"inherit",children:Object(r.jsx)(V.a,{})})]})]})}),Object(r.jsx)("div",{className:a.toolbar}),Object(r.jsx)(v.a,{maxWidth:"md",children:!i&&Object(r.jsx)(ft,{Axios:z.a})})]})};a(471);var yt=function(){var e=Object(n.useState)("light"),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(u.a)({palette:{type:a}});return Object(r.jsxs)(b.a,{theme:c,children:[Object(r.jsx)(p.a,{}),Object(r.jsx)(j.a,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{path:"/",exact:!0,render:function(e){return Object(r.jsx)(C,Object(o.a)(Object(o.a)({},e),{},{type:a,setType:s}))}}),Object(r.jsx)(d.a,{path:"/admin",exact:!0,render:function(e){return Object(r.jsx)(D,Object(o.a)(Object(o.a)({},e),{},{type:a,setType:s}))}}),Object(r.jsx)(d.a,{path:"/login",exact:!0,render:function(e){return Object(r.jsx)(U,Object(o.a)(Object(o.a)({},e),{},{type:a,setType:s}))}}),Object(r.jsx)(d.a,{path:"/signup",exact:!0,render:function(e){return Object(r.jsx)(q,Object(o.a)(Object(o.a)({},e),{},{type:a,setType:s}))}}),Object(r.jsx)(d.a,{path:"/admin-profile",exact:!0,render:function(e){return Object(r.jsx)(mt,Object(o.a)(Object(o.a)({},e),{},{type:a,setType:s}))}}),Object(r.jsx)(d.a,{path:"/user",exact:!0,render:function(e){return Object(r.jsx)(wt,Object(o.a)(Object(o.a)({},e),{},{type:a,setType:s}))}})]})}),Object(r.jsx)("div",{className:"footer-text",children:Object(r.jsxs)("span",{children:["\xa9 Copyright 2021, Built with lots of \ud83c\udf55 at"," ",Object(r.jsx)(O.a,{color:"secondary",href:"https://hophacks.com",children:"HopHacks '21"}),"."]})})]})};i.a.render(Object(r.jsx)(yt,{}),document.getElementById("root"))}},[[472,1,2]]]);
//# sourceMappingURL=main.82c58ea8.chunk.js.map